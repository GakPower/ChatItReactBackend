(this["webpackJsonpchatit-react"]=this["webpackJsonpchatit-react"]||[]).push([[0],{26:function(e,t,a){e.exports=a(43)},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),s=a.n(o),i=(a(31),a(32),a(33),a(9)),l=function(){return r.a.createElement("nav",{id:"navBar"},r.a.createElement(i.b,{to:"/"},"ChatIt"),r.a.createElement("div",null,r.a.createElement(i.b,{to:"/login"},"Login"),r.a.createElement(i.b,{to:"/join"},"Join")))},c=a(2),u=a(1),m=a.n(u),d=a(3),p=a(5),v=(a(40),function(e){var t=e.register,a=e.type,o=e.name,s=e.placeholder,i=e.invalid,l=e.shouldCheck,c=void 0!==l&&l,u=Object(n.useState)(!1),m=Object(p.a)(u,2),d=m[0],v=m[1];return r.a.createElement("div",{id:"field",className:function(){var e=[];return c&&e.push(i?"invalid":"valid"),e.join(" ")}()},r.a.createElement("input",{className:"password"===a?"pass":"",ref:t,name:o,type:d&&"password"===a?"text":a,placeholder:s,defaultValue:""}),"password"===a&&r.a.createElement("button",{className:"toggle",type:"button",onClick:function(){return v((function(e){return!e}))},tabIndex:-1},d?"H":"S"))}),h=a(15),f="http://localhost:5000",g=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.email,r=t.password,e.abrupt("return",fetch("".concat(f,"/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,email:n,password:r})}).then((function(e){return e.json()})).catch((function(e){return console.log({error:e})})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(m.a.mark((function e(t,a,n){var r,o,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.emailUsername,o=t.password,e.prev=1,e.next=4,fetch("".concat(f,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailUsername:r,password:o,emailLogin:a})});case 4:return s=e.sent,e.next=7,s.json();case 7:return i=e.sent,n("token",i.token,{path:"/",sameSite:"lax"}),b(i.token),e.abrupt("return",i);case 13:return e.prev=13,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,a,n){return e.apply(this,arguments)}}(),b=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(f,"/posts"),{method:"GET",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),E=a(44),j=(a(41),function(){var e=Object(E.a)(),t=Object(p.a)(e,2),a=t[0],o=t[1],s=Object(n.useState)(!1),i=Object(p.a)(s,2),l=i[0],c=i[1],u=Object(h.a)(),f=u.register,g=u.handleSubmit,b=u.errors,j=u.reset,x=u.setError,y=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.emailUsername,r=t.password,c(!0),setTimeout(Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w({emailUsername:n,password:r},/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/i.test(n),o);case 3:j(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),x("emailUsername",{type:"manual",message:e.t0.message});case 9:console.log({cookies:a}),c(!1);case 11:case"end":return e.stop()}}),e,null,[[0,6]])}))),1e3);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"loginContainer"},r.a.createElement("h3",null,"Login"),r.a.createElement("form",{onSubmit:g(y)},r.a.createElement(v,{register:f(),name:"emailUsername",type:"text",placeholder:"Email or Username"}),r.a.createElement(v,{register:f(),name:"password",type:"password",placeholder:"Password"}),function(){var e,t;(null===b||void 0===b?void 0:b.emailUsername)&&(e=null===b||void 0===b||null===(t=b.emailUsername)||void 0===t?void 0:t.message);return r.a.createElement("p",null,e)}(),r.a.createElement("button",{type:"submit",disabled:l},"Login")))}),x=(a(42),function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],o=t[1],s=Object(n.useState)(!1),i=Object(p.a)(s,2),l=i[0],c=i[1],u=Object(h.a)(),f=u.register,w=u.handleSubmit,b=u.errors,E=u.watch,j=u.reset,x=u.setError,y=E("password",""),k=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.username,n=t.email,r=t.password,c(!0),setTimeout(Object(d.a)(m.a.mark((function e(){var t,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g({username:a,email:n,password:r});case 3:t=e.sent,j(),o(!1),console.log({res:t}),e.next=16;break;case 9:return e.prev=9,e.t0=e.catch(0),console.log("gg"),e.next=14,e.t0.json();case 14:(s=e.sent).field?x(s.field,{type:"manual",message:s.message}):console.log({res:s});case 16:c(!1);case 17:case"end":return e.stop()}}),e,null,[[0,9]])}))),1e3);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"joinContainer"},r.a.createElement("h3",null,"Join"),r.a.createElement("form",{onSubmit:w(k)},r.a.createElement(v,{register:f({required:"Username is required",maxLength:{value:255,message:"Username is too long"}}),shouldCheck:a,invalid:null===b||void 0===b?void 0:b.username,name:"username",type:"text",placeholder:"Username"}),r.a.createElement(v,{register:f({required:"Email is required",maxLength:{value:255,message:"Email is too long"},pattern:{value:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/i,message:"Invalid Email input"}}),shouldCheck:a,invalid:null===b||void 0===b?void 0:b.email,name:"email",type:"text",placeholder:"Email"}),r.a.createElement(v,{register:f({required:"Password is required",minLength:{value:8,message:"Password is too short"},maxLength:{value:255,message:"Password is too long"}}),shouldCheck:a,invalid:null===b||void 0===b?void 0:b.password,name:"password",type:"password",placeholder:"Password"}),r.a.createElement(v,{register:f({required:"Confirm Password is required",minLength:{value:8,message:"Confirm Password is too short"},maxLength:{value:255,message:"Confirm Password is too long"},validate:{value:function(e){return e===y}}}),shouldCheck:a,invalid:null===b||void 0===b?void 0:b.passConfirm,name:"passConfirm",type:"password",placeholder:"Confirm Password"}),function(){var e,t;if(null===b||void 0===b?void 0:b.username)e=null===b||void 0===b||null===(t=b.username)||void 0===t?void 0:t.message;else if(null===b||void 0===b?void 0:b.email){var a;e=null===b||void 0===b||null===(a=b.email)||void 0===a?void 0:a.message}else if(null===b||void 0===b?void 0:b.password){var n;e=null===b||void 0===b||null===(n=b.password)||void 0===n?void 0:n.message}else(null===b||void 0===b?void 0:b.passConfirm)&&(e="Passwords do not match");return r.a.createElement("p",null,e)}(),r.a.createElement("button",{id:"submit",type:"submit",disabled:l,onClick:function(){return o(!0)}},"Join")))});var y=function(){return r.a.createElement("div",{id:"App"},r.a.createElement(l,null),r.a.createElement("div",{id:"switchContainer"},r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/login",component:j}),r.a.createElement(c.b,{path:"/join",component:x}),r.a.createElement(c.a,{to:"/login"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var k=a(45);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,r.a.createElement(k.a,null,r.a.createElement(y,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.85e7da6f.chunk.js.map