(this["webpackJsonpchatit-react"]=this["webpackJsonpchatit-react"]||[]).push([[0],{24:function(e,t,a){e.exports=a(43)},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),s=a.n(o),i=(a(29),a(30),a(31),a(6)),c=function(){return r.a.createElement("nav",{id:"navBar"},r.a.createElement(i.b,{to:"/"},"ChatIt"),r.a.createElement("div",null))},l=a(4),u=a(1),d=a.n(u),m=a(2),p=a(3),v=(a(38),function(e){var t=e.register,a=e.type,o=e.name,s=e.placeholder,i=e.invalid,c=e.shouldCheck,l=void 0!==c&&c,u=Object(n.useState)(!1),d=Object(p.a)(u,2),m=d[0],v=d[1];return r.a.createElement("div",{id:"field",className:function(){var e=[];return l&&e.push(i?"invalid":"valid"),e.join(" ")}()},r.a.createElement("input",{className:"password"===a?"pass":"",ref:t,name:o,type:m&&"password"===a?"text":a,placeholder:s,defaultValue:""}),"password"===a&&r.a.createElement("button",{className:"toggle",type:"button",onClick:function(){return v((function(e){return!e}))},tabIndex:-1},m?"H":"S"))}),f=a(10),h=a(23),g="http://localhost:5000",w=new h.a,b=function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n,r,o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.email,r=t.password,e.prev=1,e.next=4,fetch("".concat(g,"/api/auth/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,email:n,password:r})});case 4:return o=e.sent,e.next=7,o.json();case 7:return s=e.sent,e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(1),console.log({error:e.t0}),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(m.a)(d.a.mark((function e(t,a){var n,r,o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.emailUsername,r=t.password,e.prev=1,e.next=4,fetch("".concat(g,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailUsername:n,password:r,emailLogin:a})});case 4:return o=e.sent,e.next=7,o.json();case 7:return(s=e.sent).valid&&w.set("token",s.token,{path:"/",sameSite:"strict"}),e.abrupt("return",s);case 12:return e.prev=12,e.t0=e.catch(1),console.log({error:e.t0}),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,a){return e.apply(this,arguments)}}(),y=function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,e.prev=1,e.next=4,fetch("".concat(g,"/api/auth/forgotPass"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})});case 4:return n=e.sent,e.next=7,n.json();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(g,"/api/auth/checkResetId"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})});case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",!!n.valid);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(m.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(g,"/api/auth/updatePassword"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,newPassword:a})});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}(),x=(a(39),function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],o=t[1],s=Object(f.a)(),c=s.register,l=s.handleSubmit,u=s.errors,h=s.reset,g=s.setError,w=function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.emailUsername,n=t.password,o(!0),setTimeout(Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!1),e.next=3,E({emailUsername:a,password:n},/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/i.test(a));case 3:(t=e.sent).valid?h():g("emailUsername",{type:"manual",message:t.message});case 5:case"end":return e.stop()}}),e)}))),1e3);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"loginContainer"},r.a.createElement("h3",null,"Login"),r.a.createElement("form",{onSubmit:l(w)},r.a.createElement(v,{register:c(),name:"emailUsername",type:"text",placeholder:"Email or Username"}),r.a.createElement(v,{register:c(),name:"password",type:"password",placeholder:"Password"}),r.a.createElement(i.b,{to:"/forgotPassword",id:"forgotPass"},"Forgot your password?"),function(){var e,t;(null===u||void 0===u?void 0:u.emailUsername)&&(e=null===u||void 0===u||null===(t=u.emailUsername)||void 0===t?void 0:t.message);return r.a.createElement("p",{id:"error"},e)}(),r.a.createElement("button",{type:"submit",disabled:a},"Login"),r.a.createElement("p",{id:"join"},"Don't have an account? ",r.a.createElement(i.b,{to:"/join"},"Join us"))))}),C=(a(40),function(e){var t=e.history,a=Object(n.useState)(!1),o=Object(p.a)(a,2),s=o[0],c=o[1],l=Object(n.useState)(!1),u=Object(p.a)(l,2),h=u[0],g=u[1],w=Object(f.a)(),E=w.register,y=w.handleSubmit,j=w.errors,O=w.watch,x=w.reset,C=w.setError,P=O("password",""),k=function(){var e=Object(m.a)(d.a.mark((function e(a){var n,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.username,r=a.email,o=a.password,g(!0),setTimeout(Object(m.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!1),e.next=3,b({username:n,email:r,password:o});case 3:(a=e.sent).valid?(x(),c(!1),t.push("./login")):a.field?C(a.field,{type:"manual",message:a.message}):console.log({res:a});case 5:case"end":return e.stop()}}),e)}))),1e3);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"joinContainer"},r.a.createElement("h3",null,"Join"),r.a.createElement("form",{onSubmit:y(k)},r.a.createElement(v,{register:E({required:"Username is required",maxLength:{value:255,message:"Username is too long"}}),shouldCheck:s,invalid:null===j||void 0===j?void 0:j.username,name:"username",type:"text",placeholder:"Username"}),r.a.createElement(v,{register:E({required:"Email is required",maxLength:{value:255,message:"Email is too long"},pattern:{value:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/i,message:"Invalid Email input"}}),shouldCheck:s,invalid:null===j||void 0===j?void 0:j.email,name:"email",type:"text",placeholder:"Email"}),r.a.createElement(v,{register:E({required:"Password is required",minLength:{value:8,message:"Password is too short"},maxLength:{value:255,message:"Password is too long"}}),shouldCheck:s,invalid:null===j||void 0===j?void 0:j.password,name:"password",type:"password",placeholder:"Password"}),r.a.createElement(v,{register:E({required:"Confirm Password is required",minLength:{value:8,message:"Confirm Password is too short"},maxLength:{value:255,message:"Confirm Password is too long"},validate:{value:function(e){return e===P}}}),shouldCheck:s,invalid:null===j||void 0===j?void 0:j.passConfirm,name:"passConfirm",type:"password",placeholder:"Confirm Password"}),function(){var e,t;if(null===j||void 0===j?void 0:j.username)e=null===j||void 0===j||null===(t=j.username)||void 0===t?void 0:t.message;else if(null===j||void 0===j?void 0:j.email){var a;e=null===j||void 0===j||null===(a=j.email)||void 0===a?void 0:a.message}else if(null===j||void 0===j?void 0:j.password){var n;e=null===j||void 0===j||null===(n=j.password)||void 0===n?void 0:n.message}else(null===j||void 0===j?void 0:j.passConfirm)&&(e="Passwords do not match");return r.a.createElement("p",{id:"error"},e)}(),r.a.createElement("button",{id:"submit",type:"submit",disabled:h,onClick:function(){return c(!0)}},"Join"),r.a.createElement("p",{id:"login"},"Already got an account? ",r.a.createElement(i.b,{to:"/login"},"Login"))))}),P=(a(41),function(e){var t,a=e.history,o=Object(n.useState)(!1),s=Object(p.a)(o,2),c=s[0],l=s[1],u=Object(n.useState)(!1),h=Object(p.a)(u,2),g=h[0],w=h[1],b=Object(f.a)(),E=b.register,j=b.handleSubmit,O=b.errors,x=b.reset,C=function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.email,w(!0),setTimeout(Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!1),e.next=3,y({email:n});case 3:x(),l(!1),a.push("./login");case 6:case"end":return e.stop()}}),e)}))),1e3);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"forgotPassContainer"},r.a.createElement("form",{onSubmit:j(C)},r.a.createElement("h3",null,"Reset Password"),r.a.createElement("p",{id:"desc"},"You will receive an email at your inbox with guidelines to reset your password"),r.a.createElement(v,{register:E({required:"Email is required",pattern:{value:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/i,message:"Invalid Email input"}}),shouldCheck:c,invalid:null===O||void 0===O?void 0:O.email,name:"email",type:"text",placeholder:"Email"}),(null===O||void 0===O?void 0:O.email)&&r.a.createElement("p",{id:"error"},null===O||void 0===O||null===(t=O.email)||void 0===t?void 0:t.message),r.a.createElement("button",{type:"submit",disabled:g,onClick:function(){return l(!0)}},"Submit")),r.a.createElement("p",{id:"login"},"Back to ",r.a.createElement(i.b,{to:"/login"},"Login")))}),k=(a(42),function(e){var t=e.history,a=Object(l.g)().id;j(a).then((function(e){e||t.push("/login")})),Object(n.useEffect)((function(){var e=setInterval((function(){j(a).then((function(e){e||t.push("/login")}))}),1e3);return function(){clearInterval(e)}}),[a,t]);var o=Object(n.useState)(!1),s=Object(p.a)(o,2),i=s[0],c=s[1],u=Object(n.useState)(!1),h=Object(p.a)(u,2),g=h[0],w=h[1],b=Object(f.a)(),E=b.register,y=b.handleSubmit,x=b.watch,C=b.errors,P=b.reset,k=b.setError,S=x("password",""),A=function(){var e=Object(m.a)(d.a.mark((function e(n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.password,n.passConfirm,w(!0),setTimeout(Object(m.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!1),e.next=3,O(a,r);case 3:(n=e.sent).valid?(P(),c(!1),t.push("./login")):k("password",{type:"manual",message:n.message});case 5:case"end":return e.stop()}}),e)}))),1e3);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"resetPassContainer"},r.a.createElement("h3",null,"Reset Password"),r.a.createElement("form",{onSubmit:y(A)},r.a.createElement(v,{register:E({required:"Password is required",minLength:{value:8,message:"Password is too short"},maxLength:{value:255,message:"Password is too long"}}),shouldCheck:i,invalid:null===C||void 0===C?void 0:C.password,name:"password",type:"password",placeholder:"New Password"}),r.a.createElement(v,{register:E({required:"Confirm Password is required",minLength:{value:8,message:"Confirm Password is too short"},maxLength:{value:255,message:"Confirm Password is too long"},validate:{value:function(e){return e===S}}}),shouldCheck:i,invalid:null===C||void 0===C?void 0:C.passConfirm,name:"passConfirm",type:"password",placeholder:"Confirm Password"}),function(){var e,t;(null===C||void 0===C?void 0:C.password)?e=null===C||void 0===C||null===(t=C.password)||void 0===t?void 0:t.message:(null===C||void 0===C?void 0:C.passConfirm)&&(e="Passwords do not match");return r.a.createElement("p",null,e)}(),r.a.createElement("button",{type:"submit",disabled:g,onClick:function(){return c(!0)}},"Submit")))});var S=function(){return r.a.createElement("div",{id:"App"},r.a.createElement(c,null),r.a.createElement("div",{id:"switchContainer"},r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/login",component:x}),r.a.createElement(l.b,{path:"/join",component:C}),r.a.createElement(l.b,{path:"/forgotPassword",component:P}),r.a.createElement(l.b,{path:"/resetPassword/:id",component:k}),r.a.createElement(l.a,{to:"/login"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,r.a.createElement(S,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.63c10936.chunk.js.map